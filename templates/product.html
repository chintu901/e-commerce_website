{% extends 'layout.html' %}

{% block extra_css %}
    <link rel="stylesheet" href="{{ url_for('static', filename='style/css/product.css') }}">
{% endblock %}

{% block content %}
    <section id="top-shop-banner">
        <img src="{{ url_for('static', filename='img/pixel-room-digital-art-hd-wallpaper-1920x1080-uhdpaper.com-634.0_b.jpg') }}" alt="Shop Banner">
        <h1 class="headline"> #LuxuryInEveryDetail</h1>
    </section>


    <section id="product2" class="section-padding">
        <div class="single-pro-image">
            <img src="{{ url_for('static', filename=images[0]) }}" width="100%" id="MainImg"  alt="{{ product['name'] }}">

            <div class="small-image-group">
                <div class="small-img-col">
                    <img src="{{ url_for('static', filename=images[0]) }}" width="100%" class="small-img"  alt="{{ product['name'] }}">
                </div>
                <div class="small-img-col">
                    <img src="{{ url_for('static', filename=images[1]) }}" width="100%" class="small-img"  alt="{{ product['name'] }}">
                </div>
                <div class="small-img-col">
                    <img src="{{ url_for('static', filename=images[2]) }}" width="100%" class="small-img"  alt="{{ product['name'] }}">
                </div>
                <div class="small-img-col">
                    <img src="{{ url_for('static', filename=images[3]) }}" width="100%" class="small-img"  alt="{{ product['name'] }}">
                </div>
            </div>
        </div>
        <div class="single-pro-details">
            <h2>{{ product['name'] }}</h2>
            <h2>Price: ${{ product['price'] }}</h2>
            <p>Inclusive of all taxes<br>
            (Also includes all applicable duties)</p>
            <select>
                <option>Select Size</option>
                <option>UK6</option>
                <option>UK9</option>
                <option>UK10</option>
                <option>UK12</option>
            </select>
            <form action="{{ url_for('cart_page') }}" method="post">
                <!-- Hidden input to send the product_id with the form -->
                <input type="hidden" name="product_id" value="{{ product['id'] }}">
                
                <!-- Quantity input to capture user-defined quantity -->
                <input type="number" name="quantity" value="1" min="1" max="10">
                
                <!-- Submit button to add to cart -->
                <button type="submit">Add To Cart</button>
            </form>
            
            <h4>Product Details</h4>
            <p id="text">{{ product['description'] }}</p>
            
        </div>
    </section> 

    

    <script>
        // Get the main image element
        const mainImg = document.getElementById("MainImg");

        // Get all small images
        const smallImgs = document.querySelectorAll(".small-img");

        // Variable to store the previously selected main image source
        let defaultMainImgSrc = mainImg.src;

        // Function to change the main image on hover
        function changeMainImage(event) {
            mainImg.src = event.target.src;
        }

        // Function to revert to the previously selected image on mouse leave
        function revertMainImage() {
            mainImg.src = defaultMainImgSrc;
        }

        // Add event listeners for each small image
        smallImgs.forEach(smallImg => {
            // Change the main image when hovering over a small image
            smallImg.addEventListener("mouseover", changeMainImage);

            // Revert to the previous main image on mouse leave
            smallImg.addEventListener("mouseleave", revertMainImage);

            // Update the default main image when a small image is clicked
            smallImg.addEventListener("click", (event) => {
                defaultMainImgSrc = event.target.src;
                mainImg.src = defaultMainImgSrc; // Also update the main image on click
            });
        });

    </script>
{% endblock %}